# Tutorial-SM64DS-Widescreen-And-Analog-Controls

***Disclaimers***
1. I am NOT responsible for any damages to your console. Please follow all instructions EXACTLY!***
2. I own none of the software. Rights go to their respective owners. Do NOT ask me for a rom. Please get a rom legally.

***Tips***
1. Make folders if they don't exist
2. turn on "show file extensions" in your file explorer to make it easier to see what you are doing

***Tutorial***
1. Use xdeltaUI/xdeltaUI.exe to patch your game with the sm64ws.xdelta (I know it works for US version 1.1. Dunno if it'll work for other regions)
2. Put the patched game on your 3ds sd card in SD:/roms/nds/
3. Put usercheat.dat on your 3ds sd card in SD:/_nds/ntr-forwarder/ (Put it into SD:/_nds/TWiLightMenu/extras/ if you want to use Twiilight Menu++ instead)
4. Hold select button and press 3ds power button, keep hold select button until you get to the Luma menu.
5. Use the dpad and press A to select "Enable loading external FIRMs and modules"
6. Press start to go to home menu
7. Install universal updater (https://github.com/Universal-Team/Universal-Updater/releases/latest)
8. Open universal updater and search for TWLPatch
9. Choose the .3dsx version
10. Search for NDSforwarder (Or if you want to use Twiilight Menu++, search for it and download the .cia, then skip to step 17)
11. Choose the .3dsx version
12. Once all downloads are finished, go to homebrew launcher
13. Open NDSforwarder
12. navigate to SD:/roms/nds/
13. Select your patched game
14. Leave options default 
15. Press install
16. Press start to exit to the hb launcher
17. Plug in 3ds!!!! You do NOT want it to lose power during the next step. It might brick if it loses power near the end, idk, I didn't test cause I like my 3ds :)
18. Open TWLPatch
19. Hold down Y, then hold down B also
20. In the menu that pops up, use the dpad and A to select "GPU scaling" and then Widescreen
21. Press start button and then wait!!! Do NOT turn of the 3ds. It may take up to 10 minutes
22. When it says it's done, then hold select to go back to the home menu
23. Open the gift wrapped game. (If using Twiilight Menu++, open it and navigate to the game and open it)
24. Do not press any buttons until you get to the title screen of the game. 
25. Go back to the home menu w/ home button
26. Move the file TwlBg.cxi from SD:/luma/sysmodules/ to SD:/_nds/ntr-forwarder/TwlBg/ (If using Twiilight Menu++, move it to SD:/_nds/TWiLightMenu/TwlBg/), then rename it to "Widescreen.cxi"
27. Go to home menu and hold down Y while you open the game (If using Twiilight Menu++, navigate to the game and press Y to open the options, then skip to step to step 29)
28. Keep holding Y until a menu pops up
29. Press X to open the cheat menu
30. Select "Analog Controls"
31. (Optional) Select "Swap L And R....." if you want the controls to be more like Wii U VC of SM64
32. Press X to save and go back to the other menu
30. Use dpad and A to select the following options: "Run in: DSi Mode", "ARM9 CPU Speed: 133 Mhz (TWL)", "VRAM Mode: DSi Mode", "Widescreen: On"
31. Press start to save (If using Twiilight Menu++, press B instead, then skip to step 33)
32. It might freeze and/or reboot, so wait about 2 minutes until it boots to the title screen
33. Now it's all set up so that those settings apply automatically everytime you open the game
34. Enjoy!

***Troubleshooting***
Problem: Other DS(i) games are affected by the widescreen and look all stretched!
Solution:
1. Open TWLPatch
2. Select nintendo original (or any option on the main screen if you want)
3. Press start
4. Wait until it's done
5. Hold select to exit
6. Try opening a DS(i) game that is not SM64 and it should show up correctly in 4:3
7. Try opening SM64 and it should show up in widescreen 16:10

Problem: Glitches and/or buzzy audio
Solution:
1. Open SM64DS
2. Press L + Down on Dpad + Select
3. On the menu, go to options and then try changing to DS mode
4. Press B twice to go back to the game
5. If this fixes it, then skip to step 7
6. If not, then try changing other settings on the menu and see what works
7. Exit back to the home menu
8. Hold Y while opening SM64DS until the menu shows up
9. Edit the options to match the options that fixed the issue for you
10. This should work but apparently different options are needed for different 3DSs so your mileage may very
